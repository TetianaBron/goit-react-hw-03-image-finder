{"version":3,"sources":["Components/ImageGallery/ImageGallery.module.css","Components/ImageGalleryItem/ImageGalleryItem.module.css","Components/Button/Button.module.css","Components/Modal/Modal.module.css","Components/Layout/Layout.module.css","Components/Layout/Layout.js","Components/Searchbar/Searchbar.js","Components/ImageGalleryItem/ImageGalleryItem.js","Components/Button/Button.js","services/pixabay-api.js","Components/Modal/Modal.js","Components/ImageGallery/ImageGallery.js","App.js","index.js","Components/Searchbar/Searchbar.module.css"],"names":["module","exports","Layout","children","className","s","layout","Searchbar","state","query","handleQueryChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","toast","error","this","SearchForm","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","name","onChange","autoComplete","autoFocus","placeholder","Component","ImageGalleryItem","webformatURL","tags","clickOnItem","src","alt","onClick","ImageGalleryItemImage","Button","onIncrement","ButtonSection","api","fetchImg","page","fetch","then","response","json","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","image","createPortal","Overlay","Status","ImageGallery","items","status","showModal","largeImage","pixabayAPI","prevState","hits","catch","finally","scrollTo","top","documentElement","scrollHeight","behavior","resetPage","incrementPage","toggleModal","prevProps","Loader","color","height","width","timeout","message","length","map","index","largeImageURL","MessageNotFound","Query","App","handleFormSubmit","defaultProps","ReactDOM","render"],"mappings":"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","file":"static/js/main.85b931bb.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3nFvb\",\"Loader\":\"ImageGallery_Loader__7N_e0\",\"MessageNotFound\":\"ImageGallery_MessageNotFound__2nauL\",\"Query\":\"ImageGallery_Query__L9rBy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__1R6II\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__3LZie\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__286Eg\",\"ButtonSection\":\"Button_ButtonSection__3S3X5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__3IVYd\",\"Modal\":\"Modal_Modal__2C5Ns\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"Layout_layout__cZwjm\"};","import React from 'react';\nimport s from './Layout.module.css';\n\nconst Layout = ({ children }) =>\n    <div className={s.layout}>{children}</div>;\n\nexport default Layout;","import { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n//import { ImSearch } from 'react-icons/im';\r\nimport { toast } from 'react-toastify';\r\nimport s from './Searchbar.module.css';\r\n\r\n\r\nexport default class Searchbar extends Component {\r\n  static propTypes = {\r\n    onSubmit: PropTypes.func,\r\n  };\r\n  \r\n  state = {\r\n    query: '',\r\n  };\r\n\r\n  handleQueryChange = event => {\r\n    this.setState({ query: event.currentTarget.value.toLowerCase() });\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n\r\n    if (this.state.query.trim() === '') {\r\n      toast.error(\"Введите что-то.\");\r\n      return;\r\n    }\r\n\r\n    this.props.onSubmit(this.state.query);\r\n    this.setState({ query: '' });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={s.Searchbar}>\r\n        <form onSubmit={this.handleSubmit} className={s.SearchForm}>\r\n          <button type=\"submit\" className={s.SearchFormButton}>\r\n            <span className={s.SearchFormButtonLabel}>Search</span>\r\n            </button>\r\n\r\n              <input\r\n                 className={s.SearchFormInput}\r\n                 type=\"text\"\r\n                 name=\"query\"\r\n                 value={this.state.query}\r\n                 onChange={this.handleQueryChange}\r\n                 autoComplete=\"off\"\r\n                 autoFocus\r\n                 placeholder=\"Search images and photos from Pixabay\"\r\n              />\r\n           </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n","import s from './ImageGalleryItem.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst ImageGalleryItem = ({webformatURL, tags, clickOnItem}) => (\r\n    <div className={s.ImageGalleryItem}>\r\n        <img\r\n            src={webformatURL}\r\n            alt={tags}\r\n            onClick={clickOnItem}\r\n            className={s.ImageGalleryItemImage} />\r\n    </div>\r\n)\r\n\r\nImageGalleryItem.propTypes = {\r\n    webformatURL: PropTypes.string,\r\n    tags: PropTypes.string.isRequired,\r\n    clickOnItem: PropTypes.func,\r\n};\r\n\r\nexport default ImageGalleryItem;","import s from './Button.module.css';\r\n\r\nconst Button = ({ onIncrement }) => (\r\n    <div className={s.ButtonSection}>\r\n        <button type=\"button\" onClick={onIncrement} className={s.Button}>Load more</button>\r\n    </div>\r\n)\r\n\r\nexport default Button;","function fetchImg(query, page) {\r\n  const BASE_URL = 'https://pixabay.com/api';\r\n  const KEY = '19207978-b8cc5d5178f1c84e5ac39b1c7';\r\n  const perPage = 12;\r\n  \r\n    return fetch(`${BASE_URL}/?q=${query}&page=${page}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=${perPage}`)\r\n      .then(response => response.json());\r\n}\r\n\r\nconst api = {\r\n  fetchImg,\r\n};\r\n\r\nexport default api;\r\n\r\n// function incrementPage(page) {\r\n//     page += 1;\r\n//     fetchImg()\r\n//   }\r\n\r\n// export default incrementPage;\r\n      \r\n// function resetPage() {\r\n//     page = 1;\r\n// }\r\n  \r\n// export default resetPage;","import React, { Component } from 'react';\r\nimport s from './Modal.module.css';\r\nimport { createPortal } from 'react-dom';\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport default class Modal extends Component {\r\n    \r\n    componentDidMount() {\r\n        window.addEventListener('keydown', this.handleKeyDown);\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        window.removeEventListener('keydown', this.handleKeyDown);\r\n    }\r\n\r\n    handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n        this.props.onClose();\r\n        }\r\n    }\r\n\r\n    handleBackdropClick = e => {\r\n        if (e.currentTarget === e.target) {\r\n            this.props.onClose();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { src, alt } = this.props.image;\r\n        \r\n        return createPortal(\r\n            <div className={s.Overlay} onClick={this.handleBackdropClick}>\r\n                <div className={s.Modal}>\r\n                    <img src={src} alt={alt} />\r\n                </div>\r\n            </div>,\r\n            modalRoot);\r\n    }\r\n}\r\n\r\nModal.propTypes = {\r\n  image: PropTypes.object,\r\n  onClose: PropTypes.func,\r\n};\r\n ","import { Component } from 'react';\r\nimport s from './ImageGallery.module.css';\r\nimport { toast } from 'react-toastify';\r\nimport PropTypes from 'prop-types';\r\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\nimport Button from '../Button/Button';\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport pixabayAPI from '../../services/pixabay-api';\r\nimport Modal from '../Modal/Modal';\r\n\r\nconst Status = {\r\n  IDLE: 'idle',\r\n  PENDING: 'pending',\r\n  RESOLVED: 'resolved',\r\n  REJECTED: 'rejected',\r\n};\r\n\r\nexport default class ImageGallery extends Component {\r\n    static propTypes = {\r\n    query: PropTypes.string.isRequired,\r\n    };\r\n    \r\n    state = {\r\n        items: [],\r\n        error: null,\r\n        status: Status.IDLE,\r\n        page: 1,\r\n        showModal: false,\r\n\r\n        largeImage: {\r\n            src: \"\",\r\n            alt: \"\",\r\n        },\r\n    };\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.query !== this.props.query) {\r\n            this.setState({ status: Status.PENDING, items: [] });\r\n            this.resetPage();\r\n            this.fetch()\r\n       }\r\n    }\r\n\r\n    fetch = () => {\r\n     pixabayAPI\r\n            .fetchImg(this.props.query, this.state.page)\r\n            .then(items => this.setState(prevState => ({\r\n          items: [...prevState.items, ...items.hits],\r\n          status: Status.RESOLVED,})))\r\n            .catch(error => this.setState({ error, status: Status.REJECTED }))\r\n        .finally(() => {\r\n        window.scrollTo({\r\n          top: document.documentElement.scrollHeight,\r\n          behavior: 'smooth',\r\n        });\r\n      });\r\n    }\r\n    \r\n    resetPage = () => {\r\n        this.setState({ page: 1 });\r\n    }\r\n\r\n    incrementPage = () => {\r\n        this.setState(prevState => ({ page: (prevState.page += 1) }));\r\n        this.fetch();\r\n    }\r\n    \r\n    toggleModal = () => {\r\n        this.setState(({showModal}) => ({\r\n            showModal: !showModal\r\n        }))\r\n    }\r\n\r\n    clickOnItem = (src, alt) => {\r\n            this.setState({\r\n                largeImage: { src, alt },\r\n            });\r\n            this.toggleModal();\r\n    }\r\n\r\n    render() {\r\n        const { items, error, status, showModal, largeImage} = this.state;\r\n\r\n        if (status === 'idle') {\r\n            return <></>\r\n        }\r\n\r\n        if (status === 'pending') {\r\n            return (\r\n                <div className={s.Loader}>\r\n                    <Loader\r\n                         type=\"Puff\"\r\n                         color=\"#00BFFF\"\r\n                         height={260}\r\n                         width={260}\r\n                         timeout={3000}\r\n                    />\r\n                 </div>)\r\n        }\r\n\r\n        if (status === 'rejected') {\r\n            return toast.error(`${error.message}`)\r\n        }\r\n\r\n        if (status === 'resolved') {\r\n            if (items.length > 0) {\r\n                return (\r\n                    <>\r\n                          <ul className={s.ImageGallery}>\r\n                            {items.map(({ webformatURL, largeImageURL, tags}, index) => (\r\n                                <li key={index}>\r\n                                    <ImageGalleryItem\r\n                                        webformatURL={webformatURL}\r\n                                        largeImageURL={largeImageURL}\r\n                                        tags={tags}\r\n                                        clickOnItem={() => this.clickOnItem(largeImageURL, tags)}/>\r\n                                </li>\r\n                            ))}\r\n                          </ul>\r\n                        {showModal &&\r\n                            <Modal\r\n                                image={largeImage}\r\n                                onClose={this.toggleModal}\r\n                            />}\r\n                        {items.length > 11 && <Button onIncrement={() => this.incrementPage()} />}\r\n                    </>\r\n                )\r\n            } else {\r\n                return <p className={s.MessageNotFound}><span className={s.Query}>{this.props.query}</span> is not found.</p>;\r\n            }\r\n        }\r\n    }\r\n}\r\n            \r\n","import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Layout from './Components/Layout/Layout';\nimport Searchbar from './Components/Searchbar/Searchbar';\nimport ImageGallery from './Components/ImageGallery/ImageGallery';\n\nexport default class App extends Component {\n\n    static propTypes = {\n    };\n\n    static defaultProps = {};\n\n    state = {\n        query: '',\n    };\n\n    handleFormSubmit = query => {\n        this.setState({ query });\n    };\n\n    render() {\n        \n        return ( \n            <Layout>\n                <Searchbar onSubmit={this.handleFormSubmit} />\n                <ImageGallery query={this.state.query} />\n                <ToastContainer/>\n            </Layout>\n        );\n    }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport  './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n    <App />, document.querySelector('#root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2vFhN\",\"SearchForm\":\"Searchbar_SearchForm__3p_VH\",\"SearchFormButton\":\"Searchbar_SearchFormButton__v10O-\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__2Nq7x\",\"SearchFormInput\":\"Searchbar_SearchFormInput__njklP\"};"],"sourceRoot":""}