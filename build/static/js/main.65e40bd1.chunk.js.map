{"version":3,"sources":["components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Button/Button.module.css","components/Layout/Layout.module.css","components/Layout/Layout.js","components/Searchbar/Searchbar.js","images/No_Image-512.webp","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","services/pixabay-api.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Layout","children","className","s","layout","Searchbar","state","query","handleQueryChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","toast","error","this","SearchForm","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","name","onChange","autoComplete","autoFocus","placeholder","Component","ImageGalleryItem","webformatURL","tags","clickOnItem","src","Img","alt","onClick","ImageGalleryItemImage","Button","onIncrement","ButtonSection","api","fetchImg","page","fetch","then","response","json","modalRoot","document","querySelector","Modal","isLoading","handleKeyDown","e","code","onClose","handleBackdropClick","target","onLoad","window","addEventListener","removeEventListener","image","createPortal","Overlay","Loader","color","height","width","timeout","ImageGallery","items","loading","showModal","largeImage","pixabayAPI","total","prevState","hits","catch","message","finally","scrollTo","top","documentElement","scrollHeight","behavior","toggleModal","handleButtonClick","handleGalleryItemClick","prevProps","length","map","index","largeImageURL","App","handleFormSubmit","ReactDOM","render"],"mappings":"wIACAA,EAAOC,QAAU,CAAC,QAAU,uBAAuB,MAAQ,uB,mBCA3DD,EAAOC,QAAU,CAAC,aAAe,mCAAmC,OAAS,+B,mBCA7ED,EAAOC,QAAU,CAAC,iBAAmB,2CAA2C,sBAAwB,kD,mBCAxGD,EAAOC,QAAU,CAAC,OAAS,uBAAuB,cAAgB,gC,mBCAlED,EAAOC,QAAU,CAAC,OAAS,yB,kKCKZC,EAHA,SAAC,GAAD,IAAGC,EAAH,EAAGA,SAAH,OACX,qBAAKC,UAAWC,IAAEC,OAAlB,SAA2BH,K,gBCEVI,E,4MAKnBC,MAAQ,CACNC,MAAO,I,EAGTC,kBAAoB,SAAAC,GAClB,EAAKC,SAAS,CAAEH,MAAOE,EAAME,cAAcC,MAAMC,iB,EAGnDC,aAAe,SAAAL,GACbA,EAAMM,iBAE0B,KAA5B,EAAKT,MAAMC,MAAMS,QAKrB,EAAKC,MAAMC,SAAS,EAAKZ,MAAMC,OAC/B,EAAKG,SAAS,CAAEH,MAAO,MALrBY,IAAMC,MAAM,gF,uDASd,OACE,wBAAQlB,UAAWC,IAAEE,UAArB,SACE,uBAAMa,SAAUG,KAAKP,aAAcZ,UAAWC,IAAEmB,WAAhD,UACE,wBAAQC,KAAK,SAASrB,UAAWC,IAAEqB,iBAAnC,SACE,sBAAMtB,UAAWC,IAAEsB,sBAAnB,sBAGE,uBACGvB,UAAWC,IAAEuB,gBACbH,KAAK,OACLI,KAAK,QACLf,MAAOS,KAAKf,MAAMC,MAClBqB,SAAUP,KAAKb,kBACfqB,aAAa,MACbC,WAAS,EACTC,YAAY,sC,GAzCUC,a,mECNxB,MAA0B,0CCoB1BC,EAhBU,SAAC,GAAD,IAAEC,EAAF,EAAEA,aAAcC,EAAhB,EAAgBA,KAAMC,EAAtB,EAAsBA,YAAtB,OACrB,qBAAKlC,UAAWC,IAAE8B,iBAAlB,SACI,qBACII,IAAKH,GAAgBI,EACrBC,IAAKJ,EACLK,QAASJ,EACTlC,UAAWC,IAAEsC,2B,iBCGVC,EAVA,SAAC,GAAD,IAAGC,EAAH,EAAGA,YAAH,OACX,qBAAKzC,UAAWC,IAAEyC,cAAlB,SACI,wBAAQrB,KAAK,SAASiB,QAASG,EAAazC,UAAWC,IAAEuC,OAAzD,0B,yBCIR,IAIeG,EAJH,CACVC,SAVF,SAAkBvC,EAAOwC,GAKrB,OAAOC,MAAM,GAAD,OAJG,0BAIH,eAAmBzC,EAAnB,iBAAiCwC,EAAjC,gBAHF,qCAGE,6DAFE,KAGbE,MAAK,SAAAC,GAAQ,OAAIA,EAASC,Y,iBCAzBC,EAAYC,SAASC,cAAc,eAEpBC,E,4MAMjBjD,MAAQ,CACJkD,WAAW,G,EAWfC,cAAgB,SAAAC,GACD,WAAXA,EAAEC,MACF,EAAK1C,MAAM2C,W,EAIfC,oBAAsB,SAAAH,GACdA,EAAE/C,gBAAkB+C,EAAEI,QACtB,EAAK7C,MAAM2C,W,EAGnBG,OAAS,WACL,EAAKrD,SAAS,CAAE8C,WAAW,K,kEAnB3BQ,OAAOC,iBAAiB,UAAW5C,KAAKoC,iB,6CAIxCO,OAAOE,oBAAoB,UAAW7C,KAAKoC,iB,+BAkBrC,IAAD,EACgBpC,KAAKJ,MAAMkD,MAAxB9B,EADH,EACGA,IAAKE,EADR,EACQA,IACLiB,EAAcnC,KAAKf,MAAnBkD,UAER,OAAOY,uBACH,mCACA,qBAAKlE,UAAWC,IAAEkE,QAAS7B,QAASnB,KAAKwC,oBAAzC,SACQ,sBAAK3D,UAAWC,IAAEoD,MAAlB,UAEEC,GACD,qBAAKtD,UAAWC,IAAEmE,OAAlB,SACI,cAAC,IAAD,CACG/C,KAAK,YACLgD,MAAM,UACNC,OAAQ,GACRC,MAAO,GACPC,QAAS,QAIjB,qBACIX,OAAQ1C,KAAK0C,OACb1B,IAAKA,EACLE,IAAKA,WAIjBa,O,GA5DuBpB,aCGd2C,E,4MAKjBrE,MAAQ,CACJsE,MAAO,GACPxD,MAAO,KACPyD,SAAS,EACT9B,KAAM,EACN+B,WAAW,EAEXC,WAAY,CACR1C,IAAK,GACLE,IAAK,K,EAWbS,MAAQ,SAACzC,GACL,EAAKG,SAAS,CAAEmE,SAAS,IAEzBG,EACKlC,SAASvC,EAAO,EAAKD,MAAMyC,MAC3BE,MAAK,SAAC2B,GACiB,IAAhBA,EAAMK,OACN9D,IAAMC,MAAN,UAAeb,EAAf,oCAEJ,EAAKG,UAAS,SAAAwE,GAAS,MAAK,CACxBN,MAAM,GAAD,mBAAMM,EAAUN,OAAhB,YAA0BA,EAAMO,OACrCpC,KAAMmC,EAAUnC,KAAO,SAG9BqC,OAAM,SAAAhE,GACFD,IAAMC,MAAMA,EAAMiE,SAClB,EAAK3E,SAAS,CAAEU,MAAOA,EAAMiE,aAEpCC,SAAQ,WACL,EAAK5E,SAAS,CAAEmE,SAAS,IACzBb,OAAOuB,SAAS,CACZC,IAAKnC,SAASoC,gBAAgBC,aAC9BC,SAAU,e,EAKvBC,YAAc,WACV,EAAKlF,UAAS,kBAAkB,CAC5BoE,WADU,EAAEA,e,EAKpBe,kBAAoB,WAChB,EAAK7C,MAAM,EAAK/B,MAAMV,Q,EAG1BuF,uBAAyB,SAACzD,EAAKE,GACvB,EAAK7B,SAAS,CACVqE,WAAY,CAAE1C,MAAKE,SAEvB,EAAKqD,e,0GAhDYG,G,oEACjBA,EAAUxF,QAAUc,KAAKJ,MAAMV,M,gCACzBc,KAAKX,SAAS,CAAEkE,MAAO,GAAI7B,KAAM,I,OACvC1B,KAAK2B,MAAM3B,KAAKJ,MAAMV,O,sIAgDpB,IAAD,SAC4Cc,KAAKf,MAA9CsE,EADH,EACGA,MAAOE,EADV,EACUA,UAAWD,EADrB,EACqBA,QAASE,EAD9B,EAC8BA,WAEnC,OACA,qCACKH,EAAMoB,OAAS,GACX,oBAAI9F,UAAWC,IAAEwE,aAAjB,SACAC,EAAMqB,KAAI,WAAwCC,GAAxC,IAAGhE,EAAH,EAAGA,aAAciE,EAAjB,EAAiBA,cAAehE,EAAhC,EAAgCA,KAAhC,OACH,6BACE,cAAC,EAAD,CACID,aAAcA,EACdiE,cAAeA,EACfhE,KAAMA,EACNC,YAAa,kBAAM,EAAK0D,uBAAuBK,EAAehE,OAL3D+D,QASpBrB,GACI,qBAAK3E,UAAWC,IAAEmE,OAAlB,SACQ,cAAC,IAAD,CACG/C,KAAK,YACLgD,MAAM,UACNC,OAAQ,GACRC,MAAO,GACPC,QAAS,QAIxBI,GACQ,cAAC,EAAD,CACWX,MAAOY,EACPnB,QAASvC,KAAKuE,cAGjChB,EAAMoB,OAAS,IAAO,cAAC,EAAD,CAAQrD,YAAa,kBAAM,EAAKkD,8B,GAvGzB7D,aCJrBoE,E,4MAEjB9F,MAAQ,CACJC,MAAO,I,EAGX8F,iBAAmB,SAAA9F,GACf,EAAKG,SAAS,CAAEH,W,uDAKhB,OACI,eAAC,EAAD,WACI,cAAC,EAAD,CAAWW,SAAUG,KAAKgF,mBAC1B,cAAC,EAAD,CAAc9F,MAAOc,KAAKf,MAAMC,QAChC,cAAC,IAAD,W,GAhBiByB,aCDjCsE,IAASC,OACL,cAAC,EAAD,IAASlD,SAASC,cAAc,W,kBCNpCxD,EAAOC,QAAU,CAAC,UAAY,6BAA6B,WAAa,8BAA8B,iBAAmB,oCAAoC,sBAAwB,yCAAyC,gBAAkB,sC","file":"static/js/main.65e40bd1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__25R6g\",\"Modal\":\"Modal_Modal__1T4c0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__34PfI\",\"Loader\":\"ImageGallery_Loader__2B34N\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__1Mgc0\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__r-u2j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3Ev6u\",\"ButtonSection\":\"Button_ButtonSection__3nuQt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"Layout_layout__2N9dn\"};","import React from 'react';\nimport s from './Layout.module.css';\n\nconst Layout = ({ children }) =>\n    <div className={s.layout}>{children}</div>;\n\nexport default Layout;","import { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { toast } from 'react-toastify';\r\nimport s from './Searchbar.module.css';\r\n\r\n\r\nexport default class Searchbar extends Component {\r\n  static propTypes = {\r\n    onSubmit: PropTypes.func,\r\n  };\r\n  \r\n  state = {\r\n    query: '',\r\n  };\r\n\r\n  handleQueryChange = event => {\r\n    this.setState({ query: event.currentTarget.value.toLowerCase() });\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n\r\n    if (this.state.query.trim() === '') {\r\n      toast.error(\"Введите что-то.\");\r\n      return;\r\n    }\r\n\r\n    this.props.onSubmit(this.state.query);\r\n    this.setState({ query: '' });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={s.Searchbar}>\r\n        <form onSubmit={this.handleSubmit} className={s.SearchForm}>\r\n          <button type=\"submit\" className={s.SearchFormButton}>\r\n            <span className={s.SearchFormButtonLabel}>Search</span>\r\n            </button>\r\n\r\n              <input\r\n                 className={s.SearchFormInput}\r\n                 type=\"text\"\r\n                 name=\"query\"\r\n                 value={this.state.query}\r\n                 onChange={this.handleQueryChange}\r\n                 autoComplete=\"off\"\r\n                 autoFocus\r\n                 placeholder=\"Search images and photos\"\r\n              />\r\n           </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/No_Image-512.6bca87e4.webp\";","import s from './ImageGalleryItem.module.css';\r\nimport PropTypes from 'prop-types';\r\nimport Img from '../../images/No_Image-512.webp';\r\n\r\nconst ImageGalleryItem = ({webformatURL, tags, clickOnItem}) => (\r\n    <div className={s.ImageGalleryItem}>\r\n        <img\r\n            src={webformatURL || Img}\r\n            alt={tags}\r\n            onClick={clickOnItem}\r\n            className={s.ImageGalleryItemImage} />\r\n    </div>\r\n)\r\n\r\nImageGalleryItem.propTypes = {\r\n    webformatURL: PropTypes.string,\r\n    tags: PropTypes.string.isRequired,\r\n    clickOnItem: PropTypes.func,\r\n};\r\n\r\nexport default ImageGalleryItem;","import s from './Button.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Button = ({ onIncrement }) => (\r\n    <div className={s.ButtonSection}>\r\n        <button type=\"button\" onClick={onIncrement} className={s.Button}>Load more</button>\r\n    </div>\r\n)\r\n\r\nButton.propTypes = {\r\n    onIncrement: PropTypes.func,\r\n};\r\n\r\nexport default Button;","function fetchImg(query, page) {\r\n  const BASE_URL = 'https://pixabay.com/api';\r\n  const KEY = '19207978-b8cc5d5178f1c84e5ac39b1c7';\r\n  const perPage = 12;\r\n  \r\n    return fetch(`${BASE_URL}/?q=${query}&page=${page}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=${perPage}`)\r\n    .then(response => response.json())\r\n}\r\n\r\nconst api = {\r\n  fetchImg,\r\n};\r\n\r\nexport default api;","import React, { Component } from 'react';\r\nimport s from './Modal.module.css';\r\nimport { createPortal } from 'react-dom';\r\nimport PropTypes from \"prop-types\";\r\nimport Loader from \"react-loader-spinner\";\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport default class Modal extends Component {\r\n    static propTypes = {\r\n        image: PropTypes.object,\r\n        onClose: PropTypes.func,\r\n    };\r\n\r\n    state = {   \r\n        isLoading: true,\r\n    }; \r\n\r\n    componentDidMount() {\r\n        window.addEventListener('keydown', this.handleKeyDown);\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        window.removeEventListener('keydown', this.handleKeyDown);\r\n    }\r\n\r\n    handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n        this.props.onClose();\r\n        }\r\n    }\r\n\r\n    handleBackdropClick = e => {\r\n        if (e.currentTarget === e.target) {\r\n            this.props.onClose();\r\n        }\r\n    }\r\n    onLoad = () => {\r\n        this.setState({ isLoading: false });\r\n    }\r\n\r\n    render() {\r\n        const { src, alt } = this.props.image;\r\n        const { isLoading } = this.state;\r\n        \r\n        return createPortal(\r\n            <>\r\n            <div className={s.Overlay} onClick={this.handleBackdropClick}>\r\n                    <div className={s.Modal}>\r\n                         \r\n                     {isLoading && (\r\n                     <div className={s.Loader}>\r\n                         <Loader\r\n                            type=\"ThreeDots\"\r\n                            color=\"#3f51b5\"\r\n                            height={80}\r\n                            width={80}\r\n                            timeout={3000}\r\n                         />\r\n                      </div>)}\r\n                        \r\n                    <img\r\n                        onLoad={this.onLoad}\r\n                        src={src}\r\n                        alt={alt} />\r\n                </div>\r\n                </div>\r\n            </>,\r\n            modalRoot);\r\n    }\r\n}\r\n","import { Component } from 'react';\r\nimport s from './ImageGallery.module.css';\r\nimport { toast } from 'react-toastify';\r\nimport PropTypes from 'prop-types';\r\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\nimport Button from '../Button/Button';\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport pixabayAPI from '../../services/pixabay-api';\r\nimport Modal from '../Modal/Modal';\r\n\r\nexport default class ImageGallery extends Component {\r\n    static propTypes = {\r\n    query: PropTypes.string.isRequired,\r\n    };\r\n    \r\n    state = {\r\n        items: [],\r\n        error: null,\r\n        loading: false,\r\n        page: 1,\r\n        showModal: false,\r\n\r\n        largeImage: {\r\n            src: \"\",\r\n            alt: \"\",\r\n        },\r\n    };\r\n\r\n    async componentDidUpdate(prevProps) {\r\n        if (prevProps.query !== this.props.query ) {\r\n            await this.setState({ items: [], page: 1 });\r\n            this.fetch(this.props.query);\r\n       }\r\n    }\r\n\r\n    fetch = (query) => {\r\n        this.setState({ loading: true });\r\n\r\n        pixabayAPI\r\n            .fetchImg(query, this.state.page)\r\n            .then((items) => {\r\n                if (items.total === 0) {\r\n                    toast.error(`${query} is not found. Try another one!`);\r\n                }\r\n                this.setState(prevState => ({\r\n                    items: [...prevState.items, ...items.hits],\r\n                    page: prevState.page + 1,\r\n                }));\r\n            })\r\n            .catch(error => {\r\n                 toast.error(error.message);\r\n                 this.setState({ error: error.message });\r\n            })\r\n         .finally(() => {\r\n             this.setState({ loading: false });\r\n             window.scrollTo({\r\n                 top: document.documentElement.scrollHeight,\r\n                 behavior: 'smooth',\r\n            });\r\n         });\r\n    }\r\n    \r\n    toggleModal = () => {\r\n        this.setState(({showModal}) => ({\r\n            showModal: !showModal\r\n        }))\r\n    }\r\n\r\n    handleButtonClick = () => {\r\n        this.fetch(this.props.query);\r\n    }\r\n    \r\n    handleGalleryItemClick = (src, alt) => {\r\n            this.setState({\r\n                largeImage: { src, alt },\r\n            });\r\n            this.toggleModal();\r\n    }\r\n\r\n    render() {\r\n        const { items, showModal, loading, largeImage} = this.state;\r\n \r\n        return (\r\n        <>\r\n            {items.length > 0 &&\r\n                (<ul className={s.ImageGallery}>\r\n                {items.map(({ webformatURL, largeImageURL, tags }, index) => (\r\n                        <li key={index}>\r\n                          <ImageGalleryItem\r\n                              webformatURL={webformatURL}\r\n                              largeImageURL={largeImageURL}\r\n                              tags={tags}\r\n                              clickOnItem={() => this.handleGalleryItemClick(largeImageURL, tags)} />\r\n                        </li>))}\r\n                    </ul>)}\r\n                \r\n            {loading && \r\n                (<div className={s.Loader}>\r\n                         <Loader\r\n                            type=\"ThreeDots\"\r\n                            color=\"#3f51b5\"\r\n                            height={80}\r\n                            width={80}\r\n                            timeout={3000}\r\n                         />\r\n                </div>)}\r\n                                \r\n            {showModal &&\r\n                    (<Modal\r\n                                image={largeImage}\r\n                                onClose={this.toggleModal}\r\n                    />)}\r\n                            \r\n            {items.length > 11 && (<Button onIncrement={() => this.handleButtonClick()} />)}\r\n        </>\r\n        )    \r\n    }\r\n}\r\n            \r\n","import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Layout from './components/Layout/Layout';\nimport Searchbar from './components/Searchbar/Searchbar';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\n\nexport default class App extends Component {\n\n    state = {\n        query: '',\n    };\n\n    handleFormSubmit = query => {\n        this.setState({ query });\n    };\n\n    render() {\n        \n        return ( \n            <Layout>\n                <Searchbar onSubmit={this.handleFormSubmit} />\n                <ImageGallery query={this.state.query} />\n                <ToastContainer/>\n            </Layout>\n        );\n    }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport  './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n    <App />, document.querySelector('#root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__ZNzXf\",\"SearchForm\":\"Searchbar_SearchForm__3WhZq\",\"SearchFormButton\":\"Searchbar_SearchFormButton__1Jm4J\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__JT9Mo\",\"SearchFormInput\":\"Searchbar_SearchFormInput__19Z_n\"};"],"sourceRoot":""}